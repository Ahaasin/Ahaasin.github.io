<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/03/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/03/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-03T09:13:20+08:00">
                2019-09-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/02/51单片机中断原理及简单应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/02/51单片机中断原理及简单应用/" itemprop="url">51单片机中断原理及简单应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-02T23:04:06+08:00">
                2019-09-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/单片机/" itemprop="url" rel="index">
                    <span itemprop="name">单片机</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/19/button/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/19/button/" itemprop="url">button</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-19T16:40:26+08:00">
                2019-07-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/单片机/" itemprop="url" rel="index">
                    <span itemprop="name">单片机</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="独立按键-矩阵按键"><a href="#独立按键-矩阵按键" class="headerlink" title="独立按键/矩阵按键"></a>独立按键/矩阵按键</h1><h2 id="独立按键"><a href="#独立按键" class="headerlink" title="独立按键"></a>独立按键</h2><p>独立按键式直接用I/O口线构成的单个按键电路，其特点是每个按键单独占用一根I/O口线，每个按键的工作不会影响其他I/O口线的状态。<br><img width="450" src="https://img-blog.csdnimg.cn/20190719120532457.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70"><br>独立按键查询时，每个端口默认输出高电平，若按键按下，该端口与GND接通，变为低电平，则我们检测哪一个端口为低电平即可确定哪一个按键被按下。</p>
<h2 id="矩阵按键"><a href="#矩阵按键" class="headerlink" title="矩阵按键"></a>矩阵按键</h2><p>若按键较多，则独立按键方式需要大量I/O口，这这是我们可以用矩阵键盘方式实现。<br>矩阵键盘有四条I/O口做行线，四条I/O口做列线，每个按键都在行列交点上，如下图<br><img width="400" src="https://img-blog.csdnimg.cn/20190719122338470.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70"><br>矩阵键盘检测时，常用行列扫描法：<br>首先我们向控制列线的低四位输入低电压，向控制行线的高四位输高电平。当有按键被按下，该部分电路被导通，低电平通过按键进入高四位，对应的高四位中的I/O口值不再为1。因此我们检测P1端口值，若高四位不全为1，则说明有按键被按下，通过找出哪一个值不为1，可以确定哪一行的按键被按下。接着，再反过来，向高四位输入低电平，低四位输入高电平，检测出被按下的按键在哪一列，就可以得出被按下的按键的坐标。</p>
<h2 id="按键消抖"><a href="#按键消抖" class="headerlink" title="按键消抖"></a>按键消抖</h2><p>通常按键所用的开关都是机械弹性开关，当机械触点断开、闭合时，由于机械触点的弹性作用，一个按键开关在闭合时不会马上就稳定的接通，在断开时也不会一下子彻底断开，而是在闭合和断开的瞬间伴随了一连串的抖动.<br><img width="400" src="https://img-blog.csdnimg.cn/20190719123955724.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70"><br>稳点时间的长短是由操作人员决定的，正常按下一般都在100ms左右，抖动时长由机械结构决定，一般在10ms左右。为了确保按键检测准确，我们应该在按键稳定时检测，所以我们需要消抖。<br>通常消抖有两种方式，硬件消抖和软件消抖。<br>硬件消抖通过在案件两端并联电容的方式稳定电路<br><img width="200" src="https://img-blog.csdnimg.cn/20190719124607560.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70"><br>软件消抖有很多种方式，我这里用最简单的两次停顿来实现。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;reg52.h&gt;#define key P1</span><br><span class="line">typedef unsigned int uint;</span><br><span class="line">typedef unsigned char uchar;</span><br><span class="line"></span><br><span class="line">sbit lsa=P2^<span class="number">2</span>;sbit lsb=P2^<span class="number">3</span>;sbit lsc=P2^<span class="number">4</span>;</span><br><span class="line">uint num;</span><br><span class="line">uchar code smgduan[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line">uint line,row;</span><br><span class="line"><span class="keyword">void</span> delay(uint i)&#123;    <span class="keyword">while</span>(i--);&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> mtrkey()&#123;    </span><br><span class="line">	char a=<span class="number">0</span>;    </span><br><span class="line">	key=<span class="number">0xf0</span>;                                   <span class="comment">//高四位为1，低四位为0    </span></span><br><span class="line">	<span class="keyword">if</span>(key!=<span class="number">0xf0</span>)&#123;        </span><br><span class="line">		delay(<span class="number">1000</span>);                           <span class="comment">//第一次停顿，消除前沿抖动        </span></span><br><span class="line">		<span class="keyword">if</span>(key!=<span class="number">0xf0</span>)&#123;               </span><br><span class="line">			key=<span class="number">0Xf0</span>;            </span><br><span class="line">			<span class="keyword">switch</span>(key)            </span><br><span class="line">			&#123;                                  <span class="comment">//找到按键的行                </span></span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0X70</span>): line=<span class="number">0</span>;<span class="keyword">break</span>;                </span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0Xb0</span>): line=<span class="number">1</span>;<span class="keyword">break</span>;                </span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0Xd0</span>): line=<span class="number">2</span>;<span class="keyword">break</span>;                </span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0Xe0</span>): line=<span class="number">3</span>;<span class="keyword">break</span>;            </span><br><span class="line">			 &#125;            </span><br><span class="line">			 key=<span class="number">0x0f</span>;                         <span class="comment">//高四位为0，低四位为1            </span></span><br><span class="line">			 <span class="keyword">switch</span>(key)            </span><br><span class="line">			 &#123;                                 <span class="comment">//找到按键的列                </span></span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0X07</span>): row=<span class="number">0</span>;<span class="keyword">break</span>;                </span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0X0b</span>): row=<span class="number">1</span>;<span class="keyword">break</span>;                </span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0X0d</span>): row=<span class="number">2</span>;<span class="keyword">break</span>;                </span><br><span class="line">			 	<span class="keyword">case</span>(<span class="number">0X0e</span>): row=<span class="number">3</span>;<span class="keyword">break</span>;            </span><br><span class="line">			 &#125;            </span><br><span class="line">			 <span class="keyword">while</span>((key!=<span class="number">0x0f</span>))                <span class="comment">//第二次停顿，消除后沿抖动            </span></span><br><span class="line">			 &#123;                </span><br><span class="line">			 	delay(<span class="number">1000</span>);                </span><br><span class="line">			 	key=<span class="number">0x0f</span>;                </span><br><span class="line">			 	a++;            </span><br><span class="line">			 &#125;        </span><br><span class="line">		 &#125;    </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> main()&#123;    </span><br><span class="line">	lsa=<span class="number">0</span>;lsb=<span class="number">0</span>;lsc=<span class="number">0</span>;</span><br><span class="line">	P0=smgduan[<span class="number">0</span>];    </span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;        </span><br><span class="line">		mtrkey();        </span><br><span class="line">		num=line*<span class="number">4</span>+row;        </span><br><span class="line">		P0=smgduan[num];    </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/18/一二三四五/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/18/一二三四五/" itemprop="url">一二三四五</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-18T21:53:10+08:00">
                2019-07-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/单片机/" itemprop="url" rel="index">
                    <span itemprop="name">单片机</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="静态-动态数码管显示"><a href="#静态-动态数码管显示" class="headerlink" title="静态/动态数码管显示"></a>静态/动态数码管显示</h1><h2 id="数码管工作原理简介"><a href="#数码管工作原理简介" class="headerlink" title="数码管工作原理简介"></a>数码管工作原理简介</h2><p>数码管其实就是几个LED灯组合在一起，所以我们操作数码管也就是操作LED灯。<br><img src="https://img-blog.csdnimg.cn/20190718230859421.png" alt="在这里插入图片描述"><br>图中七个组成数字的LED加一个小数点LED一共八个LED灯管，如果我们要显示1，那就把b和c点亮，其他类推。</p>
<h3 id="共阴极-共阳极接法"><a href="#共阴极-共阳极接法" class="headerlink" title="共阴极/共阳极接法"></a>共阴极/共阳极接法</h3><p>这八个LED连接的方法有两种，共阴极和共阳极，下图左边是共阴极，右边是共阳极<br><img width="500" src="https://img-blog.csdnimg.cn/20190718112551198.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70"><br>共阴极中，我们给端口输入高电平，LED就会亮<br>共阳极中，我们输入低电平LED亮。</p>
<h3 id="位选-段选"><a href="#位选-段选" class="headerlink" title="位选/段选"></a>位选/段选</h3><p>如果我们要显示一个8位数，那么我们要控制8个字段，每个字段有8个LED，我们将选定控制哪一位字段的过程叫做位选，将选定控制某一字段中的哪一个LED的过程叫做段选。</p>
<h3 id="静态显示"><a href="#静态显示" class="headerlink" title="静态显示"></a>静态显示</h3><p>静态显示特点是每一位数码管都要接到一个八位数据线来保存显示字形码。送入字形码后显示的字形可一直保持。<br>比如假设现在我们要显示一个两位数，那么我们可能需要单片机的P1与P2接口，每个接口的8位分别连接两位数码管的八个LED，以此来控制每一位数字的显示。</p>
<h3 id="动态显示"><a href="#动态显示" class="headerlink" title="动态显示"></a>动态显示</h3><p>静态显示的缺点显然就是占用单片机太多，如果我们需要显示一个8位数，那就需要64个引脚。<br>动态显示将所有数码管段选线并联在一起，有位选线控制是哪一位数码管有效。选亮数码管采用动态扫描显示，轮流向各数码管发送字形码，利用数码管的余辉喝人眼的视觉暂留作用，使人感觉各位数码管在同时显示。</p>
<h3 id="本实验板的电路图"><a href="#本实验板的电路图" class="headerlink" title="本实验板的电路图"></a>本实验板的电路图</h3><p><img src="https://img-blog.csdnimg.cn/20190718155425504.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt><br>这就是HC6800—ES V2.0的数码管的电路。左端的138译码器用来位选，其左上角有ABC三个端口，三端口分别接在P22P23P24引脚上，数值分别是0或1，组成一个三位二进制数，其数值介于0~7之间，用来表示8位数码管。右图左下角是一个573锁存器，在这里的功能是控制某一位上的八个LED灯管，用P0的八位针脚来表示。这样，我们控制单片机的11个引脚，实现了对64个LED的控制。</p>
<h3 id="关于锁存器"><a href="#关于锁存器" class="headerlink" title="关于锁存器"></a>关于锁存器</h3><p>这块实验板上的锁存器功能体现的不明显，我们以天翔电子的TX-1C为例。<br>那块板子上的段选和位选都是由573锁存器来控制，每个锁存器都有一个锁存端，就是上图中的右图左下角LE端口。当LE打开，锁存器内部导通，上图可以看出锁存器左端接一个个引脚，右端接段选线控制LED，内部导通时引脚输入什么数，右端就会输出 什么数，左端的数会传导到右端。当LE关闭时，内部不导通，左端将保持原来的值不变。<br>    在TX-1C中，我们用两个引脚控制两个锁存器的锁存端，两个锁存器再共用8个引脚做位输入，一共10个引脚完成控制。<br>    位选时，位选锁存器打开，8个引脚输入相应数值（11111110表示控制第一个数码管，11111101表示控制第二个，类推），再关闭锁存器，保存这一数值。接着打开段选的锁存端，输入相应的字形码以控制某一个数码管显示什么数字。</p>
<h2 id="实验程序"><a href="#实验程序" class="headerlink" title="实验程序"></a>实验程序</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;reg52.h&gt; </span><br><span class="line"></span><br><span class="line">typedef unsigned char uchar;</span><br><span class="line">typedef unsigned int uint;</span><br><span class="line"></span><br><span class="line">sbit lsa=P2^<span class="number">2</span>;</span><br><span class="line">sbit lsb=P2^<span class="number">3</span>;  </span><br><span class="line">sbit lsc=P2^<span class="number">4</span>;</span><br><span class="line">uint code smgwei[<span class="number">9</span>][<span class="number">3</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;										 <span class="comment">//位选</span></span><br><span class="line">uchar code smgduan[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>,<span class="number">0x00</span>&#125;;     <span class="comment">//0,1,2....的字形码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> delay(uint i)&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> smg(uint i,uint j)&#123;</span><br><span class="line">	lsa=smgwei[i][<span class="number">2</span>];lsb=smgwei[i][<span class="number">1</span>];lsc=smgwei[i][<span class="number">0</span>];           <span class="comment">//位选赋值</span></span><br><span class="line">	P0=smgduan[j];                                                <span class="comment">//断选</span></span><br><span class="line">	delay(<span class="number">100</span>);                                                   <span class="comment">//因为要以一定的频率刷新，所以需要延时一定时间</span></span><br><span class="line">	P0=<span class="number">0x00</span>;                                                      <span class="comment">//归零一下，否则在下一位数码管会出现残影</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> main()</span><br><span class="line">&#123;</span><br><span class="line">	uint i;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)&#123;</span><br><span class="line">			smg(i,i);                                             <span class="comment">//第一位到第八位分别显示0~7</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/嘀嘀嘀嘀嘀嘀嘀嘀/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/嘀嘀嘀嘀嘀嘀嘀嘀/" itemprop="url">嘀嘀嘀嘀嘀嘀嘀嘀</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-17T20:01:05+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/单片机/" itemprop="url" rel="index">
                    <span itemprop="name">单片机</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="蜂鸣器的使用"><a href="#蜂鸣器的使用" class="headerlink" title="蜂鸣器的使用"></a>蜂鸣器的使用</h1><h2 id="蜂鸣器工作原理"><a href="#蜂鸣器工作原理" class="headerlink" title="蜂鸣器工作原理"></a>蜂鸣器工作原理</h2><h3 id="有源-无源蜂鸣器"><a href="#有源-无源蜂鸣器" class="headerlink" title="有源/无源蜂鸣器"></a>有源/无源蜂鸣器</h3><p><a href="https://baike.baidu.com/item/%E6%9C%89%E6%BA%90%E8%9C%82%E9%B8%A3%E5%99%A8/10017869" target="_blank" rel="noopener">先给个百度百科链接</a><br>有源蜂鸣器，也叫电磁式蜂鸣器，内部有电磁振荡器，接通直流电源后周期性振动发声，<br>无源蜂鸣器，也叫压电式蜂鸣器，内部没有电磁振荡器，需要接带有一定波形的电流，改变波形可以改变发出的声音的音调等等。<br>这块实验板上是一个无源蜂鸣器</p>
<h3 id="实验板上的电路"><a href="#实验板上的电路" class="headerlink" title="实验板上的电路"></a>实验板上的电路</h3><p>单片机的引脚无法直接驱动蜂鸣器，需要经过信号放大才能驱动。在这块实验板中，蜂鸣器是无源的，用的放大器是ULN2003.</p>
<p><img src="https://img-blog.csdnimg.cn/20190717201754509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 在有源蜂鸣器中，可以直接用一个三极管放大信号，实际上ULN2003内部也是NPN三极管。</p>
<h2 id="程序控制蜂鸣器"><a href="#程序控制蜂鸣器" class="headerlink" title="程序控制蜂鸣器"></a>程序控制蜂鸣器</h2><h3 id="找引脚接口"><a href="#找引脚接口" class="headerlink" title="找引脚接口"></a>找引脚接口</h3><p>在上面的电路图中可以看到，蜂鸣器端口标号是 <em>BZ</em> 由于蜂鸣器是接在ULN2003上的，所以在ULN2003电路图上也有一个<em>BZ</em>，与之对应的是端口P15，那么我们控制的就是P15端口。</p>
<h3 id="写程序"><a href="#写程序" class="headerlink" title="写程序"></a>写程序</h3><p>上面说到了，这块板子上是一个无源蜂鸣器，需要不断变换端口输出值来模拟脉冲信号，<br>引脚参数beep值为1的时候高电平，为0的时候低电平，从1到0变换一次表示一次振动，连续振动就能发声。</p>
<pre><code class="javascript">#include&lt;reg52.h&gt;
typedef unsigned char uchar;
typedef unsigned int uint;
sbit beep=P1^<span class="number">5</span>;         <span class="comment">//控制蜂鸣器的引脚为P15</span>
<span class="keyword">void</span> delay(uint i){
     <span class="keyword">while</span>(i--);
}
<span class="keyword">void</span>  main(){    
    <span class="keyword">while</span>(<span class="number">1</span>){
        beep=~beep;
        delay(<span class="number">80</span>);      <span class="comment">//每80个单位时间振动一下，周期160单位时间</span>
    }
}</code></pre>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/10/51单片机学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/10/51单片机学习/" itemprop="url">灯大灯亮灯会闪</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-10T00:46:30+08:00">
                2019-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/单片机/" itemprop="url" rel="index">
                    <span itemprop="name">单片机</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="点亮LED，LED闪烁"><a href="#点亮LED，LED闪烁" class="headerlink" title="点亮LED，LED闪烁"></a>点亮LED，LED闪烁</h1><h2 id="点亮LED"><a href="#点亮LED" class="headerlink" title="点亮LED"></a>点亮LED</h2><p>第一个内容是关于LED灯的，首先就是如何让他亮。那么我们先看一下这块实验版的LED模块的电路图：<br><img src="https://img-blog.csdnimg.cn/20190717131515280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（其实图上是有一点错误的，图中的二极管标号从上到下依次是D1 D2 D3….）</p>
<p>图中可以看出，当左端是低电位的时候，二极管导通，LED灯亮。在单片机中，0表示低电位，1表示高电位，所以我们只需要将端口参数置零，LED就会亮。<br>端口参数志玲，端口又是什么呢？我们还是看电路图。我们可以看到，这图里的8个二极管左侧有棕红色的标号P20 P21 P22……这些表示的是处理器的引脚，89C52一共有4组共32个引脚，我们编程控制的就是这些引脚。所以我们将端口置零就是将引脚参数设置为0。在程序中，我们一般这么写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;reg52.h&gt;     //51单片机的头文件</span><br><span class="line"></span><br><span class="line">sbit led1=P2^<span class="number">0</span>;      <span class="comment">//sbit是定义了一个位（一个字节八个位的那个位），和int，float这些差不多</span></span><br><span class="line">sbit led2=P2^<span class="number">1</span>;      <span class="comment">//这两句话的意思是，定义两个位，名字叫led1，led2，led1存的是引脚p20的值，led2是p21</span></span><br><span class="line"><span class="keyword">void</span> main()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)        <span class="comment">//一个死循环，程序才会一直执行下去</span></span><br><span class="line">	&#123;</span><br><span class="line">		 led1=<span class="number">0</span>;    <span class="comment">//p20引脚参数为0，输出低电平</span></span><br><span class="line">		 led2=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>写好后，和C语言类似，我们得先调试，按F7或者点这个<br><img src="https://img-blog.csdnimg.cn/20190717133204337.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>调试没有错误以后，我们要将程序拷录进单片机，就要用到 ，具体步骤如下：</p>
<hr>
<p>上次忘了写一个步骤，就是生成.hex文件，这个在keil里面是默认不生成的，但是拷录时必须是.hex格式的文件。生成步骤如下：<br><img src="https://img-blog.csdnimg.cn/20190717221058880.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="生成hex文件第一步"><br><img src="https://img-blog.csdnimg.cn/20190717221118239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="生成hex文件第二步"></p>
<h2 id><a href="#" class="headerlink" title></a><img src="https://img-blog.csdnimg.cn/20190717221129280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="生成hex文件第三步"></h2><p><img src="https://img-blog.csdnimg.cn/20190717133257539.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="拷录"><br>拷录好后，我们再打开单片机，就是这个程序。</p>
<h2 id="LED闪烁"><a href="#LED闪烁" class="headerlink" title="LED闪烁"></a>LED闪烁</h2><p>到此，我们已经解决了灯亮的问题，如何让灯会闪呢？<br>我们只需要加一个循环，让端口参数从1到0周期变换，就像下面：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;reg52.h&gt;</span><br><span class="line">typedef unsigned char uc;</span><br><span class="line">typedef unsigned int ui;</span><br><span class="line"></span><br><span class="line">sbit led=P2^<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> delay(ui i)&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		led=<span class="number">0</span>;</span><br><span class="line">		delay(<span class="number">10000</span>);</span><br><span class="line">		led=<span class="number">1</span>;</span><br><span class="line">		delay(<span class="number">10000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="跑马灯"><a href="#跑马灯" class="headerlink" title="跑马灯"></a>跑马灯</h2><p>只让一个灯闪那不够土，为了够土，我们要让他循环闪。那么最容易想到的就是依次给端口赋值，这样未免太麻烦，我们可以直接这么写</p>
<h3 id="写法1"><a href="#写法1" class="headerlink" title="写法1"></a>写法1</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;reg52.h&gt;</span><br><span class="line">typedef unsigned char uchar;</span><br><span class="line">typedef unsigned int uint;</span><br><span class="line"><span class="keyword">void</span> delay(uint i)&#123;             <span class="comment">//延时函数</span></span><br><span class="line">     	<span class="keyword">while</span>(i--);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span>  main()&#123;</span><br><span class="line">    </span><br><span class="line">    	uchar a;</span><br><span class="line">    	a=<span class="number">0x01</span>;		</span><br><span class="line">    	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    		P2=a;</span><br><span class="line">    		delay(<span class="number">10000</span>);</span><br><span class="line">    		a=a&lt;&lt;<span class="number">1</span>;            <span class="comment">//位运算，实现循环</span></span><br><span class="line">    		f(a==<span class="number">0x00</span>)        <span class="comment">//防止溢出</span></span><br><span class="line">    			a=<span class="number">0x01</span>;</span><br><span class="line">    	&#125;        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


<p>0x01是一个十六进制数，表示的是0000 0001，也就是端口P2的值依次为00000001。&lt;&lt; 左移一位后变成了0000 0010。</p>
<h3 id="写法2"><a href="#写法2" class="headerlink" title="写法2"></a>写法2</h3><p>我们也可以换一种写法，将端口值变为11111110就是0xfe然后循环位变换，这里引进一个函数，_crol_（char，int），效果看程序和结果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;reg52.h&gt;</span><br><span class="line">#include&lt;intrins.h&gt;</span><br><span class="line">typedef unsigned char uchar;</span><br><span class="line">typedef unsigned int uint;</span><br><span class="line"><span class="keyword">void</span> delay(uint i)&#123;</span><br><span class="line"> 	<span class="keyword">while</span>(i--);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span>  main()&#123;</span><br><span class="line"></span><br><span class="line">	uchar a;</span><br><span class="line">	a=<span class="number">0xfe</span>;		   <span class="comment">//表示1111 1110</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		P2=a;</span><br><span class="line">		delay(<span class="number">10000</span>);</span><br><span class="line">		a=_crol_(a,<span class="number">1</span>);   <span class="comment">//循环位移，函数的第二个参数表示移多少位，这里第一次执行后a变成了1111 1101</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/06/树形DP，洛谷P040/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/06/树形DP，洛谷P040/" itemprop="url">树形DP，洛谷P040</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-06T22:40:22+08:00">
                2019-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="洛谷P1040-树形DP-区间DP"><a href="#洛谷P1040-树形DP-区间DP" class="headerlink" title="洛谷P1040/树形DP/区间DP"></a>洛谷P1040/树形DP/区间DP</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>设一个n个节点的二叉树tree的中序遍历为（1,2,3,…,n），其中数字1,2,3,…,n为节点编号。每个节点都有一个分数（均为正整数），记第i个节点的分数为di，tree及它的每个子树都有一个加分，任一棵子树subtree（也包含tree本身）的加分计算方法如下：<br>subtree的左子树的加分× subtree的右子树的加分＋subtree的根的分数。<br>若某个子树为空，规定其加分为1，叶子的加分就是叶节点本身的分数。不考虑它的空子树。<br>试求一棵符合中序遍历为（1,2,3,…,n）且加分最高的二叉树tree。要求输出；<br>（1）tree的最高加分<br>（2）tree的前序遍历</p>
<h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>第1行：一个整数n（n＜30），为节点个数。<br>第2行：n个用空格隔开的整数，为每个节点的分数（分数＜100）。</p>
<h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>第1行：一个整数，为最高加分（结果不会超过4,000,000,000）。<br>第2行：n个用空格隔开的整数，为该树的前序遍历。<br>输入输出样例</p>
<h3 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h3><p>5<br>5 7 1 2 10</p>
<h3 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h3><p>145<br>3 1 2 4 5</p>
<p>题目链接：<a href="https://www.luogu.org/problemnew/show/P1040" target="_blank" rel="noopener">洛谷P1040</a></p>
<h2 id="题目解读"><a href="#题目解读" class="headerlink" title="题目解读"></a>题目解读</h2><p>中序遍历为1，2，3，…..，那么当k为根节点时，编号小于k的节点必然在左子树上，编号大于k的节点必然在右子树上。对于一个节点，当他的值最大时，必然是他左右节点乘积最大时，那么有状态转移方程</p>
<p><strong>f[i][j]=max(f[i][k-1]<em>f[k+1][j])+point[k]，i&lt;=k&lt;=j</em></strong></p>
<p>遍历每一个节点当作根结点时的情况，再向左子树右子树分别遍历，当f[i][j]有值时直接返回值，没有值时找到最大值并返回（可能不是很好理解，具体见代码）。</p>
<p>同时，每次f[i][j]取得max时，记录root[i][j]，也就是i节点和j节点的根节点，方便输出前序遍历。</p>
<hr>
<p>更新一个区间DP的写法，思路都是一样的，区间DP先找出两个节点组成树的所有情况，再根据上面的状态转移方程，找出3个节点的情况，最后一步步推出所有节点的情况。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">long long ans,f[<span class="number">31</span>][<span class="number">31</span>];</span><br><span class="line">int n,root[<span class="number">31</span>][<span class="number">31</span>],cot=<span class="number">1</span>;</span><br><span class="line">long long dfs(int left,int right)         <span class="comment">//深搜，树形DP</span></span><br><span class="line">&#123;</span><br><span class="line">    long long k;</span><br><span class="line">    <span class="keyword">if</span>(left&gt;right) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(f[left][right]==<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(int i=left;i&lt;=right;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            k=dfs(left,i<span class="number">-1</span>)*dfs(i+<span class="number">1</span>,right)+f[i][i];</span><br><span class="line">            <span class="keyword">if</span>(k&gt;f[left][right])</span><br><span class="line">            &#123;</span><br><span class="line">                f[left][right]=k;</span><br><span class="line">                root[left][right]=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[left][right];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> pretra(int left,int right)             <span class="comment">//输出前序遍历</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(left&gt;right) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(cot++!=<span class="number">1</span>)</span><br><span class="line">    cout&lt;&lt;<span class="string">' '</span>;</span><br><span class="line">    cout&lt;&lt;root[left][right];</span><br><span class="line">    pretra(left,root[left][right]<span class="number">-1</span>);</span><br><span class="line">    pretra(root[left][right]+<span class="number">1</span>,right);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(int j=i;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i][j]=<span class="number">-1</span>;</span><br><span class="line">            root[i][i]=i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        cin&gt;&gt;f[i][i];</span><br><span class="line">    cout&lt;&lt;dfs(<span class="number">1</span>,n)&lt;&lt;endl;</span><br><span class="line">    pretra(<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>区间DP的主要代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(int len=<span class="number">2</span>;len&lt;=n;len++)&#123;             <span class="comment">//最外层枚举长度</span></span><br><span class="line">        <span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;=n-len+<span class="number">1</span>;i++)&#123;     <span class="comment">//第二层，枚举每一个长度为len的片段</span></span><br><span class="line">            int j=i+len<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span>(int k=i;k&lt;=j;k++)&#123;       <span class="comment">//枚举某一个片段下每个节点当做更节点的情况</span></span><br><span class="line">                <span class="keyword">if</span>(f[i][j]&lt;f[i][k<span class="number">-1</span>]*f[k+<span class="number">1</span>][j]+f[k][k])&#123;</span><br><span class="line">                    f[i][j]=f[i][k<span class="number">-1</span>]*f[k+<span class="number">1</span>][j]+f[k][k];</span><br><span class="line">                    root[i][j]=k;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/06/小布尔乔亚”/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/06/小布尔乔亚”/" itemprop="url">计算几何/凸包/安德鲁</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-06T18:53:03+08:00">
                2019-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="计算几何-凸包-安德鲁算法"><a href="#计算几何-凸包-安德鲁算法" class="headerlink" title="计算几何/凸包/安德鲁算法"></a>计算几何/凸包/安德鲁算法</h1><h6 id="先说一下凸包是啥"><a href="#先说一下凸包是啥" class="headerlink" title="先说一下凸包是啥"></a>先说一下凸包是啥</h6><p>抽象解释：在一个实数向量空间V中，对于给定集合X，所有包含X的凸集的交集S被称为X的凸包。X的凸包可以用X内所有点(X1，…Xn)的凸组合来构造（来自百度百科）；</p>
<p>简单理解：对于一个平面空间上的点集，其中的一些点总可以构成一个凸多边形，这个多边形（包括边界）包含了改点集内所有的点，这个凸多边形就是凸包。<br>如图：<br><img src="https://img-blog.csdnimg.cn/20190623041913702.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在计算几何领域，有很多个求凸包的方法，这里主要讲比较容易掌握安德鲁算法（Andrew’s Algorithm)（<strong>因为我菜…</strong>)</p>
<h2 id="算法基本思路"><a href="#算法基本思路" class="headerlink" title="算法基本思路"></a>算法基本思路</h2><p>1.将给定的集合的点按X坐标升序排序，X相同则按Y升序排序；</p>
<p>2.创建凸包上部：<br>将排序后的点按从小到大顺序加入凸包<strong>A</strong>，若新加入的点使凸包<strong>A</strong>不再是凸多边形，则逆序删除之前加入的点，直到重新变成凸多边形；<br>3.创建凸包下部：<br>将排序后的点按从大到小顺序加入凸包<strong>B</strong>，若新加入的点使凸包<strong>B</strong>不再是凸多边形，则逆序删除之前加入的点，直到重新变成凸多边形；</p>
<p><strong>（显然排序后的第一个点和最后一个点必定在凸包上）</strong><br><strong>注：</strong><br>若<strong>a</strong> X <strong>b</strong> &gt; 0，表示a在b的顺时针方向上<br>若<strong>a</strong> X <strong>b</strong> &lt; 0，表示a在b的逆时针方向上<br>若<strong>a</strong> X <strong>b</strong> == 0，表示a与b共线，但不确定方向是否相同</p>
<p>下面用图解说明一下安德鲁算法:</p>
<p>第一步，将最开始的两个点加入凸包。<br><img src="https://img-blog.csdnimg.cn/20190623112336587.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>第二步，按照顺序选定点<strong>S</strong>i（不入凸包），若<strong>S</strong>i在凸包的倒数第二个点和倒数第一个点构成的向量的逆时针方向，就从凸包中删除倒数第一个点，循环此过程，直至<strong>S</strong>i在该向量顺时针方向，此时将<strong>S</strong>i入凸包。</p>
<p><img src="https://img-blog.csdnimg.cn/20190623112432742.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点2在点0指向点1的向量的顺时针方向，点2入凸包；</p>
<p><img src="https://img-blog.csdnimg.cn/20190623113636254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/2019062311364621.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点3在点1指向点2的向量的逆时针方向，点2从凸包中删除，此时点3在点0指向点1的向量的顺时针方向，入凸包；<br><img src="https://img-blog.csdnimg.cn/20190623113919999.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点4在点1指向点3的向量的顺时针方向，点4入凸包；<br><img src="https://img-blog.csdnimg.cn/20190623114018227.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190623114031819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点5在点3指向点4的向量的逆时针方向，点4从凸包中删除，此时点5在点1指向点3的向量的顺时针方向，入凸包；<br><img src="https://img-blog.csdnimg.cn/20190623114146287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190623114205758.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190623114213315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点6在点3指向点5的向量的逆时针方向，点5从凸包中删除，此时点6还在点1指向点3的向量的逆时针方向，点3从凸包中删除，此时点6在点0指向点1的向量的顺时针方向，入凸包；<br><img src="https://img-blog.csdnimg.cn/20190623114429532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTU5MDc0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>最后点7在点1到点6的向量的顺时针方向，点7入凸包</p>
<p>凸包上部构建完成</p>
<p>下部同理</p>
<p>最后两部分相连，即可得凸包。</p>
<h2 id="代码-amp-例题"><a href="#代码-amp-例题" class="headerlink" title="代码&amp;例题"></a>代码&amp;例题</h2><p><a href="http://poj.org/problem?id=3348" target="_blank" rel="noopener"><strong>破oj3348 Cows</strong></a><br>题目大意：<br>给出一些树的坐标，一这些树为顶点可以围成一片牧场，牧场中每50个单位可以放一头牛，问最多可以放多少牛。<br>求最大牧场面积，就是求凸包面积。</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt; </span><br><span class="line">using namespace std;</span><br><span class="line">struct point&#123;</span><br><span class="line">    int x,y;</span><br><span class="line">    point()&#123;&#125;</span><br><span class="line">    point(int xx,int yy)&#123;</span><br><span class="line">        x=xx;</span><br><span class="line">        y=yy;</span><br><span class="line">    &#125;</span><br><span class="line">    point operator - (<span class="keyword">const</span> point a)<span class="keyword">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> point(x-a.x,y-a.y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;p[<span class="number">11000</span>],ch[<span class="number">11000</span>];    <span class="comment">//储存原来的点集和凸包序列</span></span><br><span class="line">bool cmp(point a,point b)&#123;     <span class="comment">//点排序</span></span><br><span class="line">    <span class="keyword">if</span>(a.x==b.x)  <span class="keyword">return</span> a.y&lt;b.y;</span><br><span class="line">    <span class="keyword">return</span> a.x&lt;b.x; </span><br><span class="line">&#125;</span><br><span class="line">double chachen(point a, point b) &#123;    <span class="comment">//返回叉乘的膜</span></span><br><span class="line">    <span class="keyword">return</span> a.x*b.y-a.y*b.x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int tubao(point *p,int n, point *ch)&#123;    <span class="comment">//构造凸包</span></span><br><span class="line">    sort(p,p+n,cmp); </span><br><span class="line">    int m=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (int i=<span class="number">0</span>;i&lt;n;i++)&#123;                         <span class="comment">//上部</span></span><br><span class="line">        <span class="keyword">while</span> (m&gt;<span class="number">1</span>&amp;&amp;chachen(ch[m<span class="number">-1</span>]-ch[m<span class="number">-2</span>],p[i]-ch[m <span class="number">-2</span>])&lt;=<span class="number">0</span>) <span class="comment">//删除不凸的点</span></span><br><span class="line">            m--;</span><br><span class="line">        ch[m++]=p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    int k=m;</span><br><span class="line">    <span class="keyword">for</span> (int i=n<span class="number">-2</span>;i&gt;=<span class="number">0</span>;i--)&#123;                  <span class="comment">//下部</span></span><br><span class="line">        <span class="keyword">while</span> (m&gt;k&amp;&amp;chachen(ch[m<span class="number">-1</span>]-ch[m<span class="number">-2</span>],p[i]-ch[m<span class="number">-2</span>])&lt;=<span class="number">0</span>) <span class="comment">//删除不凸的点</span></span><br><span class="line">            m--;</span><br><span class="line">        ch[m++]=p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>)</span><br><span class="line">    m--;</span><br><span class="line">    <span class="keyword">return</span> m;                  <span class="comment">//返回凸包中元素个数</span></span><br><span class="line">&#125;</span><br><span class="line">int main(<span class="keyword">void</span>)&#123;</span><br><span class="line">    int n,m,ans;</span><br><span class="line">    double area = <span class="number">0</span>;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin&gt;&gt;p[i].x&gt;&gt;p[i].y;</span><br><span class="line">    m=tubao(p,n,ch);</span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">        area+=ch[i].x*ch[i+<span class="number">1</span>%m].y-ch[i+<span class="number">1</span>%m].x*ch[i].y;<span class="comment">//计算面积</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(area&lt;=<span class="number">0</span>)</span><br><span class="line">        area=-area;</span><br><span class="line">    ans=area/<span class="number">100</span>;                  <span class="comment">//计算面积要除2，再加上计算结果要除50，总共除100</span></span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/12/Hexo-Theme-Sakura/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/12/Hexo-Theme-Sakura/" itemprop="url">Hexo-Theme-Sakura</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-12T22:16:01+08:00">
                2018-12-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox" href="https://static.2heng.xin/wp-content/uploads//2019/02/wallhaven-672007-1-1024x576.png" rel="gallery_ck03795pt0013ws95opfoqoek" itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="https://static.2heng.xin/wp-content/uploads//2019/02/wallhaven-672007-1-1024x576.png" itemprop="contentUrl">
              </a>
            
          

          
          </div>
        </div>
      

      
        
          hexo-sakura主题使用教程
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/12/12/Hexo-Theme-Sakura/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
